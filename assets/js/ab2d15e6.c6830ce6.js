"use strict";(self.webpackChunkada_lang_io=self.webpackChunkada_lang_io||[]).push([[7565],{1716:(e,a,t)=>{t.d(a,{Zo:()=>c,kt:()=>m});var n=t(6687);function r(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function i(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function o(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?i(Object(t),!0).forEach((function(a){r(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function l(e,a){if(null==e)return{};var t,n,r=function(e,a){if(null==e)return{};var t,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)t=i[n],a.indexOf(t)>=0||(r[t]=e[t]);return r}(e,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)t=i[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var p=n.createContext({}),s=function(e){var a=n.useContext(p),t=a;return e&&(t="function"==typeof e?e(a):o(o({},a),e)),t},c=function(e){var a=s(e.components);return n.createElement(p.Provider,{value:a},e.children)},d={inlineCode:"code",wrapper:function(e){var a=e.children;return n.createElement(n.Fragment,{},a)}},h=n.forwardRef((function(e,a){var t=e.components,r=e.mdxType,i=e.originalType,p=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),h=s(t),m=r,u=h["".concat(p,".").concat(m)]||h[m]||d[m]||i;return t?n.createElement(u,o(o({ref:a},c),{},{components:t})):n.createElement(u,o({ref:a},c))}));function m(e,a){var t=arguments,r=a&&a.mdxType;if("string"==typeof e||r){var i=t.length,o=new Array(i);o[0]=h;var l={};for(var p in a)hasOwnProperty.call(a,p)&&(l[p]=a[p]);l.originalType=e,l.mdxType="string"==typeof e?e:r,o[1]=l;for(var s=2;s<i;s++)o[s]=t[s];return n.createElement.apply(null,o)}return n.createElement.apply(null,t)}h.displayName="MDXCreateElement"},6457:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>p,contentTitle:()=>o,default:()=>d,frontMatter:()=>i,metadata:()=>l,toc:()=>s});var n=t(9440),r=(t(6687),t(1716));const i={sidebar_position:59},o="7.2  Package Bodies",l={unversionedId:"arm/AA-7.2",id:"arm/AA-7.2",title:"7.2  Package Bodies",description:"In contrast to the entities declared in the visible part of a package, the entities declared in the [packagebody are visible only within the packagebody itself. As a consequence, a package with a package_body can be used for the construction of a group of related subprograms in which the logical operations available to clients are clearly isolated from the internal entities.]",source:"@site/docs/arm/AA-7.2.md",sourceDirName:"arm",slug:"/arm/AA-7.2",permalink:"/docs/arm/AA-7.2",draft:!1,tags:[],version:"current",sidebarPosition:59,frontMatter:{sidebar_position:59},sidebar:"tutorialSidebar",previous:{title:"7.1  Package Specifications and Declarations",permalink:"/docs/arm/AA-7.1"},next:{title:"7.3  Private Types and Private Extensions",permalink:"/docs/arm/AA-7.3"}},p={},s=[{value:"Syntax",id:"syntax",level:4},{value:"Legality Rules",id:"legality-rules",level:4},{value:"Static Semantics",id:"static-semantics",level:4},{value:"Dynamic Semantics",id:"dynamic-semantics",level:4},{value:"Examples",id:"examples",level:4},{value:"Wording Changes from Ada 83",id:"wording-changes-from-ada-83",level:4},{value:"Extensions to Ada 2005",id:"extensions-to-ada-2005",level:4}],c={toc:s};function d(e){let{components:a,...t}=e;return(0,r.kt)("wrapper",(0,n.Z)({},c,t,{components:a,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"72--package-bodies"},"7.2  Package Bodies"),(0,r.kt)("p",null,"[In contrast to the entities declared in the visible part of a package, the entities declared in the ",(0,r.kt)("a",{parentName:"p",href:"./AA-7.2#S0231"},"package_body")," are visible only within the ",(0,r.kt)("a",{parentName:"p",href:"./AA-7.2#S0231"},"package_body")," itself. As a consequence, a package with a ",(0,r.kt)("a",{parentName:"p",href:"./AA-7.2#S0231"},"package_body")," can be used for the construction of a group of related subprograms in which the logical operations available to clients are clearly isolated from the internal entities.] "),(0,r.kt)("h4",{id:"syntax"},"Syntax"),(0,r.kt)("p",null,"{AI05-0267-1} package_body",(0,r.kt)("a",{id:"S0231"})," ::=\npackage body ",(0,r.kt)("a",{parentName:"p",href:"./AA-6.1#S0201"},"defining_program_unit_name"),"\n[",(0,r.kt)("a",{parentName:"p",href:"./AA-13.1#S0346"},"aspect_specification"),"] is\n",(0,r.kt)("a",{parentName:"p",href:"./AA-3.11#S0086"},"declarative_part"),"\n[begin\n",(0,r.kt)("a",{parentName:"p",href:"./AA-11.2#S0304"},"handled_sequence_of_statements"),"]\nend [","[[parent_unit_name](./AA-10.1#S0291).][identifier]","(./AA-2.3#S0002)];"),(0,r.kt)("p",null,"If an ",(0,r.kt)("a",{parentName:"p",href:"./AA-2.3#S0002"},"identifier")," or ",(0,r.kt)("a",{parentName:"p",href:"./AA-10.1#S0291"},"parent_unit_name"),".",(0,r.kt)("a",{parentName:"p",href:"./AA-2.3#S0002"},"identifier")," appears at the end of a ",(0,r.kt)("a",{parentName:"p",href:"./AA-7.2#S0231"},"package_body"),", then this sequence of lexical elements shall repeat the ",(0,r.kt)("a",{parentName:"p",href:"./AA-6.1#S0201"},"defining_program_unit_name"),". "),(0,r.kt)("h4",{id:"legality-rules"},"Legality Rules"),(0,r.kt)("p",null,"{AI12-0417-1} A ",(0,r.kt)("a",{parentName:"p",href:"./AA-7.2#S0231"},"package_body")," shall be the completion of a previous ",(0,r.kt)("a",{parentName:"p",href:"./AA-7.1#S0229"},"package_declaration")," or ",(0,r.kt)("a",{parentName:"p",href:"./AA-12.1#S0312"},"generic_package_declaration"),". A library ",(0,r.kt)("a",{parentName:"p",href:"./AA-7.1#S0229"},"package_declaration")," or library ",(0,r.kt)("a",{parentName:"p",href:"./AA-12.1#S0312"},"generic_package_declaration")," shall not have a body unless it requires a body[; the Elaborate_Body aspect can be used to require a ",(0,r.kt)("a",{parentName:"p",href:"./AA-10.1#S0288"},"library_unit_declaration")," to have a body (see 10.2.1) if it would not otherwise require one]. "),(0,r.kt)("p",null,"Ramification: The first part of the rule forbids a ",(0,r.kt)("a",{parentName:"p",href:"./AA-7.2#S0231"},"package_body")," from standing alone - it has to belong to some previous ",(0,r.kt)("a",{parentName:"p",href:"./AA-7.1#S0229"},"package_declaration")," or ",(0,r.kt)("a",{parentName:"p",href:"./AA-12.1#S0312"},"generic_package_declaration"),"."),(0,r.kt)("p",null,"A nonlibrary ",(0,r.kt)("a",{parentName:"p",href:"./AA-7.1#S0229"},"package_declaration")," or nonlibrary ",(0,r.kt)("a",{parentName:"p",href:"./AA-12.1#S0312"},"generic_package_declaration")," that does not require a completion may have a corresponding body anyway. "),(0,r.kt)("h4",{id:"static-semantics"},"Static Semantics"),(0,r.kt)("p",null,"{AI05-0299-1} In any ",(0,r.kt)("a",{parentName:"p",href:"./AA-7.2#S0231"},"package_body")," without ",(0,r.kt)("a",{parentName:"p",href:"./AA-5.1#S0167"},"statement"),"s there is an implicit ",(0,r.kt)("a",{parentName:"p",href:"./AA-5.1#S0170"},"null_statement"),". For any ",(0,r.kt)("a",{parentName:"p",href:"./AA-7.1#S0229"},"package_declaration")," without an explicit completion, there is an implicit ",(0,r.kt)("a",{parentName:"p",href:"./AA-7.2#S0231"},"package_body")," containing a single ",(0,r.kt)("a",{parentName:"p",href:"./AA-5.1#S0170"},"null_statement"),". For a noninstance, nonlibrary package, this body occurs at the end of the ",(0,r.kt)("a",{parentName:"p",href:"./AA-3.11#S0086"},"declarative_part")," of the innermost enclosing program unit or ",(0,r.kt)("a",{parentName:"p",href:"./AA-5.6#S0191"},"block_statement"),"; if there are several such packages, the order of the implicit package_bodies is unspecified. [(For an instance, the implicit ",(0,r.kt)("a",{parentName:"p",href:"./AA-7.2#S0231"},"package_body")," occurs at the place of the instantiation (see 12.3). For a library package, the place is partially determined by the elaboration dependences (see Clause 10).)] "),(0,r.kt)("p",null,"Discussion: Thus, for example, we can refer to something happening just after the begin of a ",(0,r.kt)("a",{parentName:"p",href:"./AA-7.2#S0231"},"package_body"),", and we can refer to the ",(0,r.kt)("a",{parentName:"p",href:"./AA-11.2#S0304"},"handled_sequence_of_statements")," of a ",(0,r.kt)("a",{parentName:"p",href:"./AA-7.2#S0231"},"package_body"),", without worrying about all the optional pieces. The place of the implicit body makes a difference for tasks activated by the package. See also RM83-9.3(5)."),(0,r.kt)("p",null,"The implicit body would be illegal if explicit in the case of a library package that does not require (and therefore does not allow) a body. This is a bit strange, but not harmful. "),(0,r.kt)("h4",{id:"dynamic-semantics"},"Dynamic Semantics"),(0,r.kt)("p",null,"For the elaboration of a nongeneric ",(0,r.kt)("a",{parentName:"p",href:"./AA-7.2#S0231"},"package_body"),", its ",(0,r.kt)("a",{parentName:"p",href:"./AA-3.11#S0086"},"declarative_part")," is first elaborated, and its ",(0,r.kt)("a",{parentName:"p",href:"./AA-11.2#S0304"},"handled_sequence_of_statements")," is then executed. "),(0,r.kt)("p",null,"NOTE 1   A variable declared in the body of a package is only visible within this body and, consequently, its value can only be changed within the ",(0,r.kt)("a",{parentName:"p",href:"./AA-7.2#S0231"},"package_body"),'. In the absence of local tasks, the value of such a variable remains unchanged between calls issued from outside the package to subprograms declared in the visible part. The properties of such a variable are similar to those of a "static" variable of C.'),(0,r.kt)("p",null,"NOTE 2   The elaboration of the body of a subprogram explicitly declared in the visible part of a package is caused by the elaboration of the body of the package. Hence a call of such a subprogram by an outside program unit raises the exception Program_Error if the call takes place before the elaboration of the ",(0,r.kt)("a",{parentName:"p",href:"./AA-7.2#S0231"},"package_body")," (see 3.11). "),(0,r.kt)("h4",{id:"examples"},"Examples"),(0,r.kt)("p",null,"Example of a package body (see 7.1): "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ada"},"package body Rational_Numbers is\n\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ada"},"   procedure Same_Denominator (X,Y : in out Rational) is\n   begin\n      --  reduces X and Y to the same denominator:\n      ...\n   end Same_Denominator;\n\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ada"},'   function "="(X,Y : Rational) return Boolean is\n      U : Rational := X;\n      V : Rational := Y;\n   begin\n      Same_Denominator (U,V);\n      return U.Numerator = V.Numerator;\n   end "=";\n\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ada"},'   function "/" (X,Y : Integer) return Rational is\n   begin\n      if Y &gt 0 then\n         return (Numerator =&gt X,  Denominator =&gt Y);\n      else\n         return (Numerator =&gt -X, Denominator =&gt -Y);\n      end if;\n   end "/";\n\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ada"},'   function "+" (X,Y : Rational) return Rational is ... end "+";\n   function "-" (X,Y : Rational) return Rational is ... end "-";\n   function "*" (X,Y : Rational) return Rational is ... end "*";\n   function "/" (X,Y : Rational) return Rational is ... end "/";\n\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ada"},"end Rational_Numbers;\n\n")),(0,r.kt)("h4",{id:"wording-changes-from-ada-83"},"Wording Changes from Ada 83"),(0,r.kt)("p",null,"The syntax rule for ",(0,r.kt)("a",{parentName:"p",href:"./AA-7.2#S0231"},"package_body")," now uses the syntactic category ",(0,r.kt)("a",{parentName:"p",href:"./AA-11.2#S0304"},"handled_sequence_of_statements"),"."),(0,r.kt)("p",null,"The ",(0,r.kt)("a",{parentName:"p",href:"./AA-3.11#S0086"},"declarative_part")," of a ",(0,r.kt)("a",{parentName:"p",href:"./AA-7.2#S0231"},"package_body")," is now required; that doesn't make any real difference, since a ",(0,r.kt)("a",{parentName:"p",href:"./AA-3.11#S0086"},"declarative_part")," can be empty."),(0,r.kt)("p",null,"RM83 seems to have forgotten to say that a ",(0,r.kt)("a",{parentName:"p",href:"./AA-7.2#S0231"},"package_body")," can't stand alone, without a previous declaration. We state that rule here."),(0,r.kt)("p",null,"RM83 forgot to restrict the definition of elaboration of package_bodies to nongeneric ones. We have corrected that omission."),(0,r.kt)("p",null,"The rule about implicit bodies (from RM83-9.3(5)) is moved here, since it is more generally applicable. "),(0,r.kt)("h4",{id:"extensions-to-ada-2005"},"Extensions to Ada 2005"),(0,r.kt)("p",null,"{AI05-0267-1} An optional ",(0,r.kt)("a",{parentName:"p",href:"./AA-13.1#S0346"},"aspect_specification")," can be used in a ",(0,r.kt)("a",{parentName:"p",href:"./AA-7.2#S0231"},"package_body"),". This is described in 13.1.1."))}d.isMDXComponent=!0}}]);