"use strict";(self.webpackChunkada_lang_io=self.webpackChunkada_lang_io||[]).push([[5304],{5754:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>r,default:()=>u,frontMatter:()=>i,metadata:()=>s,toc:()=>h});var a=n(9440),o=(n(6687),n(1716)),l=n(2526);const i={sidebar_position:88},r="11.2  Exception Handlers",s={unversionedId:"arm/AA-11.2",id:"arm/AA-11.2",title:"11.2  Exception Handlers",description:"We're still working on the Reference manual output.  Internal links are broken,",source:"@site/docs/arm/AA-11.2.mdx",sourceDirName:"arm",slug:"/arm/AA-11.2",permalink:"/docs/arm/AA-11.2",draft:!1,tags:[],version:"current",sidebarPosition:88,frontMatter:{sidebar_position:88},sidebar:"tutorialSidebar",previous:{title:"11.1  Exception Declarations",permalink:"/docs/arm/AA-11.1"},next:{title:"11.3  Raise Statements and Raise Expressions",permalink:"/docs/arm/AA-11.3"}},c={},h=[{value:"Syntax",id:"syntax",level:4},{value:"Legality Rules",id:"legality-rules",level:4},{value:"Static Semantics",id:"static-semantics",level:4},{value:"Dynamic Semantics",id:"dynamic-semantics",level:4},{value:"Examples",id:"examples",level:4},{value:"Extensions to Ada 83",id:"extensions-to-ada-83",level:4},{value:"Wording Changes from Ada 83",id:"wording-changes-from-ada-83",level:4}],d={toc:h};function u(e){let{components:t,...n}=e;return(0,o.kt)("wrapper",(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"112--exception-handlers"},"11.2  Exception Handlers"),(0,o.kt)("admonition",{type:"warning"},(0,o.kt)("p",{parentName:"admonition"},"We're still working on the Reference manual output.  Internal links are broken,\nas are a bunch of other things.\nSee the ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/ada-lang-io/ada-lang-io/issues/20"},"tracking issue"))),(0,o.kt)("p",null,"[The response to one or more exceptions is specified by an ",(0,o.kt)("code",null,(0,o.kt)("a",{href:"./AA-11.2#S0305"},"exception_handler")),".] "),(0,o.kt)("h4",{id:"syntax"},"Syntax"),(0,o.kt)("p",null,(0,o.kt)("code",null,"handled_sequence_of_statements"),(0,o.kt)("a",{id:"S0304"}),(0,o.kt)("code",null," ::= "),"     ",(0,o.kt)("code",null,(0,o.kt)("a",{href:"./AA-5.1#S0166"},"sequence_of_statements")),"  [",(0,o.kt)("strong",null,"exception"),"     ",(0,o.kt)("code",null,(0,o.kt)("a",{href:"./AA-11.2#S0305"},"exception_handler")),"    ","{",(0,o.kt)("code",null,(0,o.kt)("a",{href:"./AA-11.2#S0305"},"exception_handler")),"}","]"),(0,o.kt)("p",null,"{",(0,o.kt)("em",null,"AI12-0212-1"),"}"," ",(0,o.kt)("code",null,"exception_handler"),(0,o.kt)("a",{id:"S0305"}),(0,o.kt)("code",null," ::= "),"  ",(0,o.kt)("strong",null,"when")," [",(0,o.kt)("code",null,(0,o.kt)("a",{href:"./AA-11.2#S0306"},"choice_parameter_specification")),":] ",(0,o.kt)("code",null,(0,o.kt)("a",{href:"./AA-11.2#S0307"},"exception_choice"))," ","{","'|' ",(0,o.kt)("code",null,(0,o.kt)("a",{href:"./AA-11.2#S0307"},"exception_choice")),"}"," =",">","     ",(0,o.kt)("code",null,(0,o.kt)("a",{href:"./AA-5.1#S0166"},"sequence_of_statements"))),(0,o.kt)("p",null,(0,o.kt)("code",null,"choice_parameter_specification"),(0,o.kt)("a",{id:"S0306"}),(0,o.kt)("code",null," ::= "),(0,o.kt)("code",null,(0,o.kt)("a",{href:"./AA-3.1#S0022"},"defining_identifier"))),(0,o.kt)("p",null,(0,o.kt)("code",null,"exception_choice"),(0,o.kt)("a",{id:"S0307"}),(0,o.kt)("code",null," ::= "),(0,o.kt)("em",null,"exception_"),(0,o.kt)("code",null,(0,o.kt)("a",{href:"./AA-4.1#S0091"},"name"))," | ",(0,o.kt)("strong",null,"others")),(0,o.kt)("p",null,(0,o.kt)("strong",null,"To be honest: "),'"',(0,o.kt)("em",null,"Handler"),'" is an abbreviation for "',(0,o.kt)("code",null,(0,o.kt)("a",{href:"./AA-11.2#S0305"},"exception_handler")),'".'),(0,o.kt)("p",null,"{",(0,o.kt)("em",null,"AI05-0299-1"),"}",' Within this clause, we sometimes abbreviate "',(0,o.kt)("code",null,(0,o.kt)("a",{href:"./AA-11.2#S0307"},"exception_choice")),'" to "',(0,o.kt)("em",null,"choice"),'". '),(0,o.kt)("h4",{id:"legality-rules"},"Legality Rules"),(0,o.kt)("p",null,"{",(0,o.kt)("em",null,"AI12-0022-1"),"}"," An ",(0,o.kt)("em",null,"exception_"),(0,o.kt)("code",null,(0,o.kt)("a",{href:"./AA-4.1#S0091"},"name"))," of an ",(0,o.kt)("code",null,(0,o.kt)("a",{href:"./AA-11.2#S0307"},"exception_choice"))," shall denote an exception."),(0,o.kt)("p",null,"A choice with an ",(0,o.kt)("em",null,"exception_"),(0,o.kt)("code",null,(0,o.kt)("a",{href:"./AA-4.1#S0091"},"name"))," ",(0,o.kt)("em",null,"covers")," the named exception. A choice with ",(0,o.kt)("strong",null,"others")," covers all exceptions not named by previous choices of the same ",(0,o.kt)("code",null,"[handled_sequence_of_statements](./AA-11.2#S0304)"),". Two choices in different ",(0,o.kt)("code",null,(0,o.kt)("a",{href:"./AA-11.2#S0305"},"exception_handler")),"s of the same ",(0,o.kt)("code",null,"[handled_sequence_of_statements](./AA-11.2#S0304)")," shall not cover the same exception. "),(0,o.kt)("p",null,(0,o.kt)("strong",null,"Ramification: "),"Two ",(0,o.kt)("code",null,(0,o.kt)("a",{href:"./AA-11.2#S0307"},"exception_choice")),"s of the same ",(0,o.kt)("code",null,(0,o.kt)("a",{href:"./AA-11.2#S0305"},"exception_handler")),' may cover the same exception. For example, given two renaming declarations in separate packages for the same exception, one may nevertheless write, for example, "',(0,o.kt)("strong",null,"when")," Ada.Text_IO.Data_Error | My_Seq_IO.Data_Error =",">",'".'),(0,o.kt)("p",null,"An ",(0,o.kt)("strong",null,"others")," choice even covers exceptions that are not visible at the place of the handler. Since exception raising is a dynamic activity, it is entirely possible for an ",(0,o.kt)("strong",null,"others")," handler to handle an exception that it could not have named. "),(0,o.kt)("p",null,"A choice with ",(0,o.kt)("strong",null,"others")," is allowed only for the last handler of a ",(0,o.kt)("code",null,(0,o.kt)("a",{href:"./AA-11.2#S0304"},"handled_sequence_of_statements"))," and as the only choice of that handler."),(0,o.kt)("p",null,"An ",(0,o.kt)("em",null,"exception_"),(0,o.kt)("code",null,(0,o.kt)("a",{href:"./AA-4.1#S0091"},"name"))," of a choice shall not denote an exception declared in a generic formal package. "),(0,o.kt)("p",null,(0,o.kt)("strong",null,"Reason: "),"This is because the compiler doesn't know the identity of such an exception, and thus can't enforce the coverage rules. "),(0,o.kt)("h4",{id:"static-semantics"},"Static Semantics"),(0,o.kt)("p",null,"A ",(0,o.kt)("code",null,(0,o.kt)("a",{href:"./AA-11.2#S0306"},"choice_parameter_specification"))," declares a ",(0,o.kt)("em",null,"choice parameter"),", which is a constant object of type Exception_Occurrence (see 11.4.1). During the handling of an exception occurrence, the choice parameter, if any, of the handler represents the exception occurrence that is being handled."),(0,o.kt)("h4",{id:"dynamic-semantics"},"Dynamic Semantics"),(0,o.kt)("p",null,"The execution of a ",(0,o.kt)("code",null,(0,o.kt)("a",{href:"./AA-11.2#S0304"},"handled_sequence_of_statements"))," consists of the execution of the ",(0,o.kt)("code",null,"[sequence_of_statements](./AA-5.1#S0166)"),". [The optional handlers are used to handle any exceptions that are propagated by the ",(0,o.kt)("code",null,"[sequence_of_statements](./AA-5.1#S0166)"),".] "),(0,o.kt)("h4",{id:"examples"},"Examples"),(0,o.kt)("p",null,(0,o.kt)("em",null,"Example of an exception handler:")," "),(0,o.kt)(l.Z,{mdxType:"CodeBlock"},"{","AI12-0178-1","}"," begin","\n",'   Open(File, In_File, "input.txt");   -- see A.8.2',"\n","exception","\n","   when E : Name_Error =",">","\n",'      Put("Cannot open input file : ");',"\n","      Put_Line(Ada.Exceptions.Exception_Message(E));  -- see 11.4.1","\n","      raise;","\n","end;","\n"),(0,o.kt)("h4",{id:"extensions-to-ada-83"},"Extensions to Ada 83"),(0,o.kt)("p",null,"The syntax rule for ",(0,o.kt)("code",null,(0,o.kt)("a",{href:"./AA-11.2#S0305"},"exception_handler"))," is modified to allow a ",(0,o.kt)("code",null,(0,o.kt)("a",{href:"./AA-11.2#S0306"},"choice_parameter_specification")),"."),(0,o.kt)("p",null,"{",(0,o.kt)("em",null,"AI95-00114-01"),"}"," Different ",(0,o.kt)("code",null,(0,o.kt)("a",{href:"./AA-11.2#S0307"},"exception_choice")),"s of the same ",(0,o.kt)("code",null,(0,o.kt)("a",{href:"./AA-11.2#S0305"},"exception_handler")),' may cover the same exception. This allows for "when Numeric_Error | Constraint_Error =',">",'" even though Numeric_Error is a rename of Constraint_Error. This also allows one to "with" two different I/O packages, and then write, for example, "when Ada.Text_IO.Data_Error | My_Seq_IO.Data_Error =',">",'" even though these might both be renames of the same exception. '),(0,o.kt)("h4",{id:"wording-changes-from-ada-83"},"Wording Changes from Ada 83"),(0,o.kt)("p",null,"The syntax rule for ",(0,o.kt)("code",null,(0,o.kt)("a",{href:"./AA-11.2#S0304"},"handled_sequence_of_statements"))," is new. These are now used in all the places where handlers are allowed. This obviates the need to explain (in Clauses 5, 6, 7, and 9) what portions of the program are handled by the handlers. Note that there are more such cases in Ada 95."),(0,o.kt)("p",null,"The syntax rule for ",(0,o.kt)("code",null,(0,o.kt)("a",{href:"./AA-11.2#S0306"},"choice_parameter_specification"))," is new. "))}u.isMDXComponent=!0}}]);