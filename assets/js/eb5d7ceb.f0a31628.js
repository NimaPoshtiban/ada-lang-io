"use strict";(self.webpackChunkada_lang_io=self.webpackChunkada_lang_io||[]).push([[1493],{5447:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>f,contentTitle:()=>m,default:()=>y,frontMatter:()=>A,metadata:()=>h,toc:()=>g});var n=a(1716),i=a(8604),o=a(2787),l=Object.defineProperty,r=Object.defineProperties,c=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable,p=(e,t,a)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,u=(e,t)=>{for(var a in t||(t={}))d.call(t,a)&&p(e,a,t[a]);if(s)for(var a of s(t))k.call(t,a)&&p(e,a,t[a]);return e};const A={sidebar_position:58},m="7.1 Package Specifications and Declarations",h={unversionedId:"arm/AA-7/AA-7.1",id:"arm/AA-7/AA-7.1",title:"7.1 Package Specifications and Declarations",description:"This Reference Manual output has not been verified,",source:"@site/docs/arm/AA-7/AA-7.1.mdx",sourceDirName:"arm/AA-7",slug:"/arm/AA-7/AA-7.1",permalink:"/docs/arm/AA-7/AA-7.1",draft:!1,tags:[],version:"current",sidebarPosition:58,frontMatter:{sidebar_position:58},sidebar:"referenceManualSidebar",previous:{title:"7 Packages",permalink:"/docs/arm/AA-7/"},next:{title:"7.2 Package Bodies",permalink:"/docs/arm/AA-7/AA-7.2"}},f={},g=[{value:"Syntax",id:"syntax",level:4},{value:"Legality Rules",id:"legality-rules",level:4},{value:"Static Semantics",id:"static-semantics",level:4},{value:"Dynamic Semantics",id:"dynamic-semantics",level:4},{value:"Examples",id:"examples",level:4},{value:"Incompatibilities With Ada 83",id:"incompatibilities-with-ada-83",level:4},{value:"Wording Changes from Ada 83",id:"wording-changes-from-ada-83",level:4},{value:"Wording Changes from Ada 95",id:"wording-changes-from-ada-95",level:4},{value:"Extensions to Ada 2005",id:"extensions-to-ada-2005",level:4}],b={toc:g};function y(e){var t,a=e,{components:l}=a,p=((e,t)=>{var a={};for(var n in e)d.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&s)for(var n of s(e))t.indexOf(n)<0&&k.call(e,n)&&(a[n]=e[n]);return a})(a,["components"]);return(0,n.kt)("wrapper",(t=u(u({},b),p),r(t,c({components:l,mdxType:"MDXLayout"}))),(0,n.kt)("h1",u({},{id:"71-package-specifications-and-declarations"}),"7.1 Package Specifications and Declarations"),(0,n.kt)("admonition",u({},{type:"warning"}),(0,n.kt)("p",{parentName:"admonition"},"This Reference Manual output has not been verified,\nand may contain omissions or errors.\nReport any problems on the ",(0,n.kt)("a",u({parentName:"p"},{href:"https://github.com/ada-lang-io/ada-lang-io/issues/20"}),"tracking issue"))),(0,n.kt)("p",null,"[A package is generally provided in two parts: a ",(0,n.kt)("code",null,(0,n.kt)("a",{href:"../AA-7/AA-7.1#S0230"},"package_specification"))," and a ",(0,n.kt)("code",null,(0,n.kt)("a",{href:"../AA-7/AA-7.2#S0231"},"package_body")),". Every package has a ",(0,n.kt)("code",null,(0,n.kt)("a",{href:"../AA-7/AA-7.1#S0230"},"package_specification")),", but not all packages have a ",(0,n.kt)("code",null,(0,n.kt)("a",{href:"../AA-7/AA-7.2#S0231"},"package_body")),".] ",(0,n.kt)("br",null)),(0,n.kt)("h4",u({},{id:"syntax"}),"Syntax"),(0,n.kt)(i.Z,{mdxType:"CodeBlock"},(0,n.kt)("code",null,"package_declaration"),(0,n.kt)("a",{id:"S0229"}),(0,n.kt)("code",null," ::= "),(0,n.kt)("code",null,(0,n.kt)("a",{href:"../AA-7/AA-7.1#S0230"},"package_specification")),";",(0,n.kt)("br",null)),(0,n.kt)(i.Z,{mdxType:"CodeBlock"},"{",(0,n.kt)("em",null,"AI05-0183-1"),"}"," ",(0,n.kt)("br",null),(0,n.kt)("code",null,"package_specification"),(0,n.kt)("a",{id:"S0230"}),(0,n.kt)("code",null," ::= "),(0,n.kt)("br",null),"    ",(0,n.kt)("strong",null,"package")," ",(0,n.kt)("code",null,(0,n.kt)("a",{href:"../AA-6/AA-6.1#S0201"},"defining_program_unit_name")),(0,n.kt)("br",null),"        [",(0,n.kt)("code",null,(0,n.kt)("a",{href:"../AA-13/AA-13.1#S0346"},"aspect_specification")),"] ",(0,n.kt)("strong",null,"is"),(0,n.kt)("br",null),"      ","{",(0,n.kt)("code",null,(0,n.kt)("a",{href:"../AA-3/AA-3.11#S0088"},"basic_declarative_item")),"}",(0,n.kt)("br",null),"   [",(0,n.kt)("strong",null,"private"),(0,n.kt)("br",null),"      ","{",(0,n.kt)("code",null,(0,n.kt)("a",{href:"../AA-3/AA-3.11#S0088"},"basic_declarative_item")),"}","]",(0,n.kt)("br",null),"    ",(0,n.kt)("strong",null,"end")," [[",(0,n.kt)("code",null,(0,n.kt)("a",{href:"../AA-10/AA-10.1#S0291"},"parent_unit_name")),".]",(0,n.kt)("code",null,(0,n.kt)("a",{href:"../AA-2/AA-2.3#S0002"},"identifier")),"]",(0,n.kt)("br",null)),(0,n.kt)("p",null,"If an ",(0,n.kt)("code",null,(0,n.kt)("a",{href:"../AA-2/AA-2.3#S0002"},"identifier"))," or ",(0,n.kt)("code",null,(0,n.kt)("a",{href:"../AA-10/AA-10.1#S0291"},"parent_unit_name")),".",(0,n.kt)("code",null,(0,n.kt)("a",{href:"../AA-2/AA-2.3#S0002"},"identifier"))," appears at the end of a ",(0,n.kt)("code",null,(0,n.kt)("a",{href:"../AA-7/AA-7.1#S0230"},"package_specification")),", then this sequence of lexical elements shall repeat the ",(0,n.kt)("code",null,(0,n.kt)("a",{href:"../AA-6/AA-6.1#S0201"},"defining_program_unit_name")),". ",(0,n.kt)("br",null)),(0,n.kt)("h4",u({},{id:"legality-rules"}),"Legality Rules"),(0,n.kt)("p",null,"{",(0,n.kt)("em",null,"AI95-00434-01"),"}"," ",(0,n.kt)("br",null),"A ",(0,n.kt)("code",null,(0,n.kt)("a",{href:"../AA-7/AA-7.1#S0229"},"package_declaration"))," or ",(0,n.kt)("code",null,(0,n.kt)("a",{href:"../AA-12/AA-12.1#S0312"},"generic_package_declaration"))," requires a completion [(a body)] if it contains any ",(0,n.kt)("code",null,(0,n.kt)("a",{href:"../AA-3/AA-3.11#S0088"},"basic_declarative_item"))," that requires a completion, but whose completion is not in its ",(0,n.kt)("code",null,(0,n.kt)("a",{href:"../AA-7/AA-7.1#S0230"},"package_specification")),". ",(0,n.kt)("br",null)),(0,n.kt)(o.Z,{type:"aarm",aarm:"note",title:"Note: ",mdxType:"Admonition"},(0,n.kt)("strong",null,"To be honest: "),"{",(0,n.kt)("em",null,"AI05-0229-1"),"}"," ",(0,n.kt)("br",null),"If an implementation supports it, the body of a package or generic package may be imported (using aspect Import, see B.1), in which case no explicit body is allowed. ",(0,n.kt)("br",null)),(0,n.kt)("h4",u({},{id:"static-semantics"}),"Static Semantics"),(0,n.kt)("p",null,"{",(0,n.kt)("em",null,"AI95-00420-01"),"}"," ","{",(0,n.kt)("em",null,"AI95-00434-01"),"}"," ",(0,n.kt)("br",null),"The first list of ",(0,n.kt)("code",null,(0,n.kt)("a",{href:"../AA-3/AA-3.11#S0088"},"basic_declarative_item")),"s of a ",(0,n.kt)("code",null,(0,n.kt)("a",{href:"../AA-7/AA-7.1#S0230"},"package_specification"))," of a package other than a generic formal package is called the ",(0,n.kt)("em",null,"visible part")," of the package. [ The optional list of ",(0,n.kt)("code",null,(0,n.kt)("a",{href:"../AA-3/AA-3.11#S0088"},"basic_declarative_item")),"s after the reserved word ",(0,n.kt)("strong",null,"private")," (of any ",(0,n.kt)("code",null,(0,n.kt)("a",{href:"../AA-7/AA-7.1#S0230"},"package_specification")),") is called the ",(0,n.kt)("em",null,"private part")," of the package. If the reserved word ",(0,n.kt)("strong",null,"private")," does not appear, the package has an implicit empty private part.] Each list of ",(0,n.kt)("code",null,(0,n.kt)("a",{href:"../AA-3/AA-3.11#S0088"},"basic_declarative_item")),"s of a ",(0,n.kt)("code",null,(0,n.kt)("a",{href:"../AA-7/AA-7.1#S0230"},"package_specification"))," forms a ",(0,n.kt)("em",null,"declaration list")," of the package.",(0,n.kt)("br",null)),(0,n.kt)(o.Z,{type:"aarm",aarm:"ramification",title:"Ramification: ",mdxType:"Admonition"},(0,n.kt)("strong",null),"This definition of visible part does not apply to generic formal packages - 12.7 defines the visible part of a generic formal package.",(0,n.kt)("br",null)),(0,n.kt)(o.Z,{type:"aarm",aarm:"note",title:"Note: ",mdxType:"Admonition"},"The implicit empty private part is important because certain implicit declarations occur there if the package is a child package, and it defines types in its visible part that are derived from, or contain as components, private types declared within the parent package. These implicit declarations are visible in children of the child package. See 10.1.1. ",(0,n.kt)("br",null)),(0,n.kt)("p",null,"[An entity declared in the private part of a package is visible only within the declarative region of the package itself (including any child units - see 10.1.1). In contrast, expanded names denoting entities declared in the visible part can be used even outside the package; furthermore, direct visibility of such entities can be achieved by means of ",(0,n.kt)("code",null,(0,n.kt)("a",{href:"../AA-8/AA-8.4#S0235"},"use_clause")),"s (see 4.1.3 and 8.4).] ",(0,n.kt)("br",null)),(0,n.kt)("h4",u({},{id:"dynamic-semantics"}),"Dynamic Semantics"),(0,n.kt)("p",null,"The elaboration of a ",(0,n.kt)("code",null,(0,n.kt)("a",{href:"../AA-7/AA-7.1#S0229"},"package_declaration"))," consists of the elaboration of its ",(0,n.kt)("code",null,(0,n.kt)("a",{href:"../AA-3/AA-3.11#S0088"},"basic_declarative_item")),"s in the given order. ",(0,n.kt)("br",null)),(0,n.kt)(o.Z,{type:"aarm",aarm:"note",title:"Note: ",mdxType:"Admonition"},"NOTE 1   The visible part of a package contains all the information that another program unit is able to know about the package.",(0,n.kt)("br",null)),(0,n.kt)(o.Z,{type:"aarm",aarm:"note",title:"Note: ",mdxType:"Admonition"},"NOTE 2   If a declaration occurs immediately within the specification of a package, and the declaration has a corresponding completion that is a body, then that body has to occur immediately within the body of the package. ",(0,n.kt)("br",null)),(0,n.kt)(o.Z,{type:"aarm",aarm:"proof",title:"Proof: ",mdxType:"Admonition"},(0,n.kt)("strong",null),"This follows from the fact that the declaration and completion are required to occur immediately within the same declarative region, and the fact that ",(0,n.kt)("code",null,"bodies")," are disallowed (by the Syntax Rules) in ",(0,n.kt)("code",null,(0,n.kt)("a",{href:"../AA-7/AA-7.1#S0230"},"package_specification")),"s. This does not apply to instances of generic units, whose bodies can occur in ",(0,n.kt)("code",null,(0,n.kt)("a",{href:"../AA-7/AA-7.1#S0230"},"package_specification")),"s. ",(0,n.kt)("br",null)),(0,n.kt)("h4",u({},{id:"examples"}),"Examples"),(0,n.kt)("p",null,(0,n.kt)("em",null,"Example of a package declaration:")," ",(0,n.kt)("br",null)),(0,n.kt)(i.Z,{mdxType:"CodeBlock"},"package Rational_Numbers is","\n","type Rational is","\n","      record","\n","         Numerator   : Integer;","\n","         Denominator : Positive;","\n","      end record;","\n",'function "="(X,Y : Rational) return Boolean;',"\n",'function "/"  (X,Y : Integer)  return Rational;  --  to construct a rational number',"\n",'function "+"  (X,Y : Rational) return Rational;',"\n",'   function "-"  (X,Y : Rational) return Rational;',"\n",'   function "*"  (X,Y : Rational) return Rational;',"\n",'   function "/"  (X,Y : Rational) return Rational;',"\n","end Rational_Numbers;","\n"),(0,n.kt)("p",null,"There are also many examples of package declarations in the predefined language environment (see Annex A). ",(0,n.kt)("br",null)),(0,n.kt)("h4",u({},{id:"incompatibilities-with-ada-83"}),"Incompatibilities With Ada 83"),(0,n.kt)(o.Z,{type:"aarm",aarm:"note",title:"Note: ",mdxType:"Admonition"},"{",(0,n.kt)("em",null,"AI12-0417-1"),"}"," ",(0,n.kt)("br",null),"In Ada 83, a library package is allowed to have a body even if it doesn't need one. In Ada 95, a library package body is either required or forbidden - never optional. The workaround is to add aspect Elaborate_Body, or something else requiring a body, to each library package that has a body that isn't otherwise required. ",(0,n.kt)("br",null)),(0,n.kt)("h4",u({},{id:"wording-changes-from-ada-83"}),"Wording Changes from Ada 83"),(0,n.kt)(o.Z,{type:"aarm",aarm:"note",title:"Note: ",mdxType:"Admonition"},"{",(0,n.kt)("em",null,"AI05-0299-1"),"}"," ",(0,n.kt)("br",null),'We have moved the syntax into this subclause and the next subclause from RM83-7.1, "Package Structure", which we have removed.',(0,n.kt)("br",null)),(0,n.kt)(o.Z,{type:"aarm",aarm:"note",title:"Note: ",mdxType:"Admonition"},"RM83 was unclear on the rules about when a package requires a body. For example, RM83-7.1(4) and RM83-7.1(8) clearly forgot about the case of an incomplete type declared in a ",(0,n.kt)("code",null,(0,n.kt)("a",{href:"../AA-7/AA-7.1#S0229"},"package_declaration"))," but completed in the body. In addition, RM83 forgot to make this rule apply to a generic package. We have corrected these rules. Finally, since we now allow a ",(0,n.kt)("code",null,(0,n.kt)("a",{href:"../AA-2/AA-2.8#S0019"},"pragma"))," Import for any explicit declaration, the completion rules need to take this into account as well. ",(0,n.kt)("br",null)),(0,n.kt)("h4",u({},{id:"wording-changes-from-ada-95"}),"Wording Changes from Ada 95"),(0,n.kt)(o.Z,{type:"aarm",aarm:"note",title:"Note: ",mdxType:"Admonition"},"{",(0,n.kt)("em",null,"AI95-00420-01"),"}"," ",(0,n.kt)("br",null),'Defined "declaration list" to avoid ambiguity in other rules as to whether packages are included. ',(0,n.kt)("br",null)),(0,n.kt)("h4",u({},{id:"extensions-to-ada-2005"}),"Extensions to Ada 2005"),(0,n.kt)(o.Z,{type:"aarm",aarm:"note",title:"Note: ",mdxType:"Admonition"},"{",(0,n.kt)("em",null,"AI05-0183-1"),"}"," ",(0,n.kt)("br",null),"An optional ",(0,n.kt)("code",null,(0,n.kt)("a",{href:"../AA-13/AA-13.1#S0346"},"aspect_specification"))," can be used in a ",(0,n.kt)("code",null,(0,n.kt)("a",{href:"../AA-7/AA-7.1#S0230"},"package_specification")),". This is described in 13.1.1. ",(0,n.kt)("br",null)))}y.isMDXComponent=!0}}]);